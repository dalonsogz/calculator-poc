# calculator-poc 

### Contents

- [Main project structure](#structure)  
- [Dependencies](#dependencies)  
- [Project scope](#scope)  
- [Compilation and quick-start](#compilation)  
- [Usage and examples](#usage)  


<a name="structure"/>

### Main project structure 


```
src/
├─ main/
│  └─ java/
│     ├─ com/
│     │  └─ calculator/
│     │     ├─ controller/
│     │     ├─ exception/
│     │     ├─ model/
│     │     └─ service/
│     │        └─ impl/
│     └─ resources/
│        └─ calculator-api.yml
└─ test/
   └─ java/
      └─ com/
         └─ calculator/
            ├─ api/
            └─ model/

target/
├─ generated-sources/
│  └─ openapi/
│     └─ .../
│       ├─ api/
│       └─ model/
├─ site/
...
```

- src: provided source code, following a typical structure used in projects based in java-spring-boot-rest services development.
  - controller: classes exposing the API rest endpoints.
  - exception: custom exception classes and exception handling classes.
  - model: definitions of data handled by the application and supporting classes.
  - service/impl: classes that define the business operations.
  - resources: typically containing static resources like application configuration. In this project only the openapi res contract definition is needed.
  - test: classes to perform unit testing.


- target: code and relevant generated resources by maven.
  - generated-sources/openapi: sources generated by OpenAPI.
  - site: contains project information. Maven plugins are configured to generate code coverage and test results reports. 

<a name="dependencies"/>

### Dependencies


At the time of the first 'release' of the first 'alpha' version these are the main dependencies and versions used.

- Main dependencies:
  - Java 17
  - Spring Boot 3.1.0


- OpenAPI dependencies:
  - OpenApi 6.6.0
  - Swagger Annotations 1.6.0
  - Other OpenAPI supporting dependencies


- Provided dependencies:
  - Tracer 1.0.0


- Unit testing:
  - JUnit 5.9.3


- Reports and coverage:
  - Surefire 3.1.2
  - Jacoco 0.8.10

Also Apache Maven is needed to compile and run this project. Apache Maven v3.2.5 has been used for this development.

<a name="scope"/>

### Project scope


The main objective of this project is to provide a base 'skeleton', following the following requirements:

- Use of SpringBoot as a base framework.
- Source code generation, based on the definition of a REST contract (calculator-api.yml) using OpenAPI.
- Inclusion of the required dependency (Tracer.jar) using the 'maven-install-plugin' plugin.
- Handling of exceptions caused by invalid operations (@RestControllerAdvice, @ExceptionHandler).
- Unit tests using JUnit5.
- Use of SOLID principles.

The implemented functionality is that of a calculator capable of performing addition and subtraction, with BigDecimal operands.

<a name="compilation"/>

### Compilation and quick-start


To compile and start the application from scratch, clone the project from the repository and input these commands:

```commandline
mvn validate
mvn compile
mvn spring-boot:run
```

, a local web server will be started (8080 port by default), and you are ready to go.

Unit tests can be performed this way:

```commandline
mvn test
```

You can also build a 'web site' with maven, that provides several information about the project and the reports generated:

```commandline
mvn site
```

, then open in a web browser the generated file `./target/site/index.html`.

In 'Project Reports' section can be found the reports results (Surefire) and the code coverage (Jacoco) provided by the unit testing.

<a name="usage"/>

### Usage and examples

The endpoint to invoke the calculator functionality will be `http://localhost:8080/api/v1/calculate`

Also three needed parameters are mandatory:
- firstOperator, an integer or decimal number.
- secondOperator, an integer or decimal number.
- operation, a string that could be 'addition' or 'subtraction'

The string result of the operation will be returned.
If any of the parameters is missing or its value is invalid, a message alerting the user of the cause is returned as well.

#### Examples

Perform an addition operation:
```commandline
curl -X GET 'http://localhost:8080/api/v1/calculate?firstOperator=-4.2315&secondOperator=9.3234&operation=addition'
```
`
{"result":5.0919}
`

Perform a subtraction operation:
```commandline
curl 'http://localhost:8080/api/v1/calculate?firstOperator=98.5&secondOperator=1.5&operation=subtraction'
```
`
{"result":97.0}
`

Try to perform an unsupported operation:
```commandline
curl 'http://localhost:8080/api/v1/calculate?firstOperator=98.5&secondOperator=9.3234&operation=division'
```
`
{"statusCode":400,"timestamp":"2023-06-12T13:20:19.5143452+02:00","message":"Unsupported operation: division","description":"uri=/api/v1/calculate"}
`

Try to perform an operation providing only one operator:
```commandline
curl 'http://localhost:8080/api/v1/calculate?secondOperator=9.3234&operation=addition'
```
`
{"statusCode":400,"timestamp":"2023-06-12T13:20:30.248695+02:00","message":"Required request parameter 'firstOperator' for method parameter type BigDecimal is not present","description":"uri=/api/v1/calculate"}
`


